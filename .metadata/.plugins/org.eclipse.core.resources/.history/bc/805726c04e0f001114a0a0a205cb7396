package pantallas;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.GridLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;

/**
 * Ventana de juego que crea una matriz lógica de 100x60 celdas usando JLabel.
 * Cada celda es opaca y se inicializa en negro.
 * No usa bloques try/catch (sin excepciones explícitas).
 */
public class pantallaJuego extends JFrame {

    private static final long serialVersionUID = 1L;

    // Parámetros de la matriz lógica
    private int anchopix = 100;   // columnas
    private int altopix  = 60;    // filas
    private int tamañopix = 8;     // tamaño visual de cada celda (px)

    private JPanel panelContenido;
    private JPanel panelMatriz;

    // Matriz de etiquetas que representan cada celda/píxel lógico
    private final JLabel[][] matrizCeldas = new JLabel[altopix][anchopix];

    public static void main(String[] args) {
        EventQueue.invokeLater(() -> {
            pantallaJuego ventana = new pantallaJuego();
            ventana.setVisible(true);
        });
    }

    public pantallaJuego() {
        setTitle("Space Invaders - Matriz 100x60");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setResizable(false);

        panelContenido = new JPanel(new BorderLayout());
        panelContenido.setBorder(new EmptyBorder(5, 5, 5, 5));
        setContentPane(panelContenido);

        panelContenido.add(crearPanelMatriz(), BorderLayout.CENTER);

        pack();                 // Ajusta el tamaño según el preferredSize del panel
        setLocationRelativeTo(null);
    }

    /**
     * Crea el panel con GridLayout(60, 100) y rellena con JLabels opacos.
     */
    private JPanel crearPanelMatriz() {
        if (panelMatriz == null) {
            panelMatriz = new JPanel(new GridLayout(altopix, anchopix, 0, 0));

            for (int fila = 0; fila < altopix; fila++) {
                for (int col = 0; col < anchopix; col++) {
                    JLabel celda = new JLabel();
                    celda.setOpaque(true);
                    celda.setBackground(Color.BLACK); // “espacio” por defecto
                    celda.setPreferredSize(new Dimension(tamañopix, tamañopix));

                    // (Opcional para depuración)
                    // celda.setBorder(BorderFactory.createLineBorder(new Color(40, 40, 40)));

                    matrizCeldas[fila][col] = celda;
                    panelMatriz.add(celda);
                }
            }

            // Tamaño total del panel para que pack() lo respete
            panelMatriz.setPreferredSize(
                new Dimension(anchopix * tamañopix, altopix * tamañopix)
            );
        }
        return panelMatriz;
    }

    
    public void colorearPixel(int x, int y, Color color) {
        if (x >= 0 && x < anchopix && y >= 0 && y < altopix) {
            matrizCeldas[y][x].setBackground(color);
        }
    }

 
    public JLabel obtenerPixel(int x, int y) {
        if (x >= 0 && x < anchopix && y >= 0 && y < altopix) {
            return matrizCeldas[y][x];
        }
        return null;
    }
}